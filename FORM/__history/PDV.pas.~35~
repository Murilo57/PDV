unit PDV;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, Grids, DBGrids, Buttons, StdCtrls, jpeg, DB, FMTBcd,
  SqlExpr, Provider, DBClient;

type
  TfrmPDV = class(TForm)
    pnlTop: TPanel;
    pnlCentro: TPanel;
    pnInfos: TPanel;
    pnlButtons: TPanel;
    pnButtons: TPanel;
    gridProdutos: TDBGrid;
    btnMaisFuncoes: TSpeedButton;
    btnCancelarOp: TSpeedButton;
    btnCarncelarItems: TSpeedButton;
    btnConsultaPreco: TSpeedButton;
    btnAbrirCaixa: TSpeedButton;
    btnCancelarVenda: TSpeedButton;
    btnDevolucao: TSpeedButton;
    pnTotalDaCompra: TPanel;
    pnSubTotal: TPanel;
    pnQuantidade: TPanel;
    pnlImagem: TPanel;
    pnPreco: TPanel;
    imgProduto: TImage;
    lbPreco: TLabel;
    lbQuantidade: TLabel;
    lbSubTotal: TLabel;
    lbTotalDaCompra: TLabel;
    pnTotalDaCompra2: TPanel;
    pnSubTotal2: TPanel;
    pnQtde: TPanel;
    pnPreco2: TPanel;
    lbRSPreco: TLabel;
    lbQtde: TLabel;
    lbRSSubTotal: TLabel;
    lbRSTotalDaCompra: TLabel;
    pnProduto: TPanel;
    lbProduto: TLabel;
    pnProduto2: TPanel;
    lbCodProd: TLabel;
    dtsPDV: TDataSource;
    cdsPDV: TClientDataSet;
    cdsPDVID: TIntegerField;
    cdsPDVITEM: TIntegerField;
    cdsPDVDESCRICAO: TStringField;
    cdsPDVVALORUNITARIO: TFMTBCDField;
    cdsPDVQTDE: TFMTBCDField;
    cdsPDVSUBTOTAL: TFMTBCDField;
    cdsPDVVALORTOTAL: TFMTBCDField;
    dspPDV: TDataSetProvider;
    sqlPDV: TSQLDataSet;
    sqlPDVID: TIntegerField;
    sqlPDVITEM: TIntegerField;
    sqlPDVDESCRICAO: TStringField;
    sqlPDVVALORUNITARIO: TFMTBCDField;
    sqlPDVQTDE: TFMTBCDField;
    sqlPDVSUBTOTAL: TFMTBCDField;
    sqlPDVVALORTOTAL: TFMTBCDField;
    cdsPDVTOTAL: TFloatField;
    Splitter1: TSplitter;
    Panel1: TPanel;
    procedure cdsPDVCalcFields(DataSet: TDataSet);
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmPDV: TfrmPDV;

implementation

uses Conexao;

{$R *.dfm}

procedure TfrmPDV.cdsPDVCalcFields(DataSet: TDataSet);
begin
    cdsPDVSUBTOTAL.AsFloat := cdsPDVVALORUNITARIO.AsFloat * cdsPDVQTDE.AsFloat;
end;

procedure TfrmPDV.FormShow(Sender: TObject);
begin
  cdsPDV.Open;
end;

end.
